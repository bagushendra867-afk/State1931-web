<!DOCTYPE html>
<html lang="id">
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8BTPQX1LDT"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-8BTPQX1LDT');
</script>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>STATE 1931 â€” Whiteout Survival</title>
<link rel="icon" type="image/png" href="/favicon.png">
<link rel="apple-touch-icon" href="/favicon.png">
<meta name="description" content="Website resmi aliansi STATE 1931 Whiteout Survival. Cek jadwal Bear Trap, Crazy Joe, dan koordinasi SVS.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://state1931.my.id/">
<meta property="og:image" content="https://state1931.my.id/logo-baru.gif">
<link rel="icon" type="image/png" href="logo-baru.png">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
<style>
:root{
  --bg1:#071026; --bg2:#0f2a44;
  --glass: rgba(255,255,255,0.06);
  --glass-2: rgba(255,255,255,0.04);
  --accent:#58a6ff; --neon:#66d0ff; --muted:#bfcfe0;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter,system-ui,sans-serif;overflow-x:hidden;}
body{
  background: linear-gradient(135deg,var(--bg1), var(--bg2));
  color:#eaf5ff;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
}
#snow-canvas{position:fixed;left:0;top:0;width:100%;height:100%;pointer-events:none;z-index:0;mix-blend-mode:screen;opacity:0.9}
.wrap{position:relative;z-index:1;max-width:980px;margin:16px auto;padding:14px}

/* Header */
header.appbar{
  display:flex;flex-wrap:wrap;gap:12px;align-items:center;
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  padding:14px;border-radius:14px;
  box-shadow:0 6px 18px rgba(3,10,20,0.6), inset 0 -1px 0 rgba(255,255,255,0.02);
  backdrop-filter: blur(8px) saturate(120%);
}
.logo{
  width:54px;height:54px;border-radius:10px;
  background:linear-gradient(180deg,#0f3a6b,#06304f);
  display:flex;align-items:center;justify-content:center;font-weight:800;
  box-shadow:0 6px 20px rgba(0,0,0,0.5);
  border:1px solid rgba(255,255,255,0.04);
  color:var(--neon); font-size:18px;
}
.title-block h1{margin:0;font-size:20px;font-weight:800;line-height:1.2}
.title-block p{margin:0;font-size:12px;color:var(--muted)}
header .right{margin-left:auto;text-align:right;font-size:13px;color:var(--muted)}

/* Countdown Styles */
.countdown{display:flex;gap:8px;align-items:center;font-weight:700; margin-top:4px;}
.countdown .box{background:rgba(0,0,0,0.3);padding:4px 8px;border-radius:6px;min-width:32px;text-align:center;font-family:monospace;font-size:1.1em;border:1px solid rgba(255,255,255,0.1);}
#nextEventName .vln { color: #3bb0ff; }
#nextEventName .grd { color: #2de68c; }
#nextEventName .bee { color: #fff24f; }
#nextEventName .tur { color: #ff5c5c; }

/* Grid & Cards */
.grid{display:grid;grid-template-columns:1fr;gap:12px;margin-top:14px;}
@media(min-width:880px){.grid{grid-template-columns:360px 1fr;}}
.card {
  margin-top: 12px;  /* INI YANG BIKIN JARAK RAPI */
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
  border-radius: 12px;
  padding: 12px;
  box-shadow: 0 8px 24px rgba(2,8,20,0.6);
  border: 1px solid rgba(255,255,255,0.04);
  backdrop-filter: blur(10px) saturate(120%);
}
.alliances-list {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  margin-top: 6px;
}
.alliance {
  padding: 10px; border-radius: 10px; font-weight: 700;
  transition: transform .18s, box-shadow .18s;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border: 1px solid rgba(255,255,255,0.02);
  font-size: 14px;
  display: flex; justify-content: center; align-items: center; gap: 8px; white-space: nowrap;
}
.alliance:hover{transform:translateY(-4px);box-shadow:0 8px 24px rgba(0,0,0,0.5)}

/* WARNA TEKS ALIANSI */
.kor{color:#3bb0ff} .grd{color:#2de68c} .bee{color:#fff24f} .tur{color:#ff5c5c}
.wbe{color:#FF9F43} .hel{color:#D6A2E8} 

/* Buttons */
.btn{
  display:inline-block;padding:10px 14px;border-radius:10px;text-decoration:none;font-weight:700;
  background:linear-gradient(90deg,var(--accent),#3bd1ff);
  color:#021428;border:none;cursor:pointer;
  box-shadow:0 6px 20px rgba(60,140,220,0.12), 0 0 18px rgba(60,160,255,0.06);
  transition:transform .12s, box-shadow .12s; flex:1; text-align:center;
}
.btn:active{transform:translateY(1px)}
.btn.neon{
  color:#001425;background:linear-gradient(90deg,#004b68,#00c0ff);
  box-shadow:0 6px 28px rgba(0,190,255,0.14),0 0 30px rgba(102,208,255,0.12);
}
.btn.sm{padding:6px 10px;font-size:12px; flex:initial; width:auto;}
.actions{display:flex;gap:10px;flex-wrap:wrap;align-items:stretch;}
.lang-switch{display:flex;gap:6px;justify-content:flex-end;margin-bottom:6px}

/* Accordion */
.accordion{width:100%;background:var(--glass-2);padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);cursor:pointer;display:flex;justify-content:space-between;align-items:center;margin-top:6px}
.accordion .left{display:flex;gap:10px;align-items:center}
.accordion .alias{font-weight:800;font-size:15px}
.chev{transition:transform .2s}
.panel{display:none;padding:10px;margin-top:6px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:8px;border:1px solid rgba(255,255,255,0.02)}
.event-row{display:flex;justify-content:space-between;padding:6px 8px;border-radius:8px;margin:4px 0;background:rgba(0,0,0,0.12)}
.event-name{font-weight:600;font-size:14px}
.event-time{font-weight:700}
#kor-panel .event-name, #kor-panel .event-time { color: #3bb0ff; }
#grd-panel .event-name, #grd-panel .event-time { color: #2de68c; }
#bee-panel .event-name, #bee-panel .event-time { color: #fff24f; }
#tur-panel .event-name, #tur-panel .event-time { color: #ff5c5c; }

/* Animation */
.fadeIn{opacity:0;transform:translateY(6px);animation:fadeUp .6s forwards}
.fadeIn.delay1{animation-delay:.08s}.fadeIn.delay2{animation-delay:.16s}.fadeIn.delay4{animation-delay:.32s}
@keyframes fadeUp{to{opacity:1;transform:none}}
.caption{font-size:12px;color:var(--muted);margin-top:6px}

/* Peta Wilayah CSS */
.fort {
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 6px;
    padding: 8px 4px;
    text-align: center;
    display: flex; flex-direction: column; justify-content: center; align-items: center;
}
.f-name { font-size: 10px; color: #8899a6; margin-bottom: 2px; }
.f-owner { font-weight: bold; font-size: 12px; color: #fff; }

.fort.grd { background: rgba(0, 255, 136, 0.1); border-color: #00ff88; }
.fort.grd .f-owner { color: #00ff88; } 
.fort.vln { background: rgba(59, 176, 255, 0.1); border-color: #3bb0ff; }
.fort.vln .f-owner { color: #3bb0ff; } 
.fort.bee { background: rgba(255, 242, 79, 0.1); border-color: #fff24f; }
.fort.bee .f-owner { color: #fff24f; } 
.fort.tur { background: rgba(255, 92, 92, 0.1); border-color: #ff5c5c; }
.fort.tur .f-owner { color: #ff5c5c; } 
.fort.wbe { background: rgba(255, 159, 67, 0.1); border-color: #FF9F43; }
.fort.wbe .f-owner { color: #FF9F43; } 
.fort.hel { background: rgba(214, 162, 232, 0.1); border-color: #D6A2E8; }
.fort.hel .f-owner { color: #D6A2E8; } 
.fort.ally { background: rgba(255, 255, 255, 0.05); border-color: #aaa; } 

@media (max-width: 480px) {
  header.appbar { padding: 10px; gap: 8px; }
  .title-block h1 { font-size: 16px; }
  .title-block p { font-size: 10px; display: block; }
  header .right { margin-left: auto; width: auto; display: flex; flex-direction: column; align-items: flex-end; }
  .countdown { display: flex; flex-direction: row; align-items: center; gap: 6px; }
  #nextEventName { font-size: 11px; white-space: nowrap; line-height: 1.2; }
  #nextEventDate { display: block; font-size: 9px; margin-top: 2px; }
  .countdown .box { padding: 3px 5px; font-size: 13px; min-width: 26px; }
}
#wbe-panel .event-name, 
#wbe-panel .event-time { 
  color: #FF9F43; 
}
#hel-panel .event-name, 
#hel-panel .event-time { 
  color: #D6A2E8; 
}
</style>
</head>
<body>
<canvas id="snow-canvas"></canvas>
<div class="wrap">
  <header class="appbar fadeIn">
    <div class="logo">
      <img src="logo-baru.gif" alt="State 1931 Logo" style="width: 100%; height: 100%; border-radius: 50%; object-fit: contain;">
    </div>
    <div class="title-block">
      <h1>âœ¨ STATE 1931</h1>
      <p data-i18n="subtitle">Whiteout Survival â€” info & schedule (UTC)</p>
    </div>
    <div class="right">
      <div class="lang-switch">
        <button class="btn sm" data-lang="id">ğŸ‡®ğŸ‡©</button>
        <button class="btn sm" data-lang="en">ğŸ‡ºğŸ‡¸</button>
        <button class="btn sm" data-lang="ko">ğŸ‡°ğŸ‡·</button>
      </div>
      <div data-i18n="nextLabel">Next event</div>
      <div class="countdown">
        <div style="text-align:right;">
           <span id="nextEventName" style="display:block; font-size:13px; margin-bottom:2px">...</span>
           <span id="nextEventDate" style="display:block; font-size:10px; font-weight:400; color:var(--muted)">...</span>
        </div>
        <div style="display:flex; gap:4px;">
           <span class="box" id="cdDays" style="display:none">00d</span>
           <span class="box" id="cdHours">00</span>:
           <span class="box" id="cdMinutes">00</span>:
           <span class="box" id="cdSeconds">00</span>
        </div>
      </div>
    </div>
  </header>

      <div class="card fadeIn delay1" style="margin-top: 12px;">
        <h2 data-i18n="majorAlliance">Major Alliance</h2>
        
        <div class="alliances-list">
          <div class="alliance kor">ğŸŸ¦ VLN</div>
          <div class="alliance grd">ğŸŸ© GRD</div>
          <div class="alliance bee">ğŸŸ¨ BEE</div>
          <div class="alliance tur">ğŸŸ¥ TUR</div>
          <div class="alliance wbe">ğŸŸ§ WBE</div>
          <div class="alliance hel">ğŸŸª HEL</div>
        </div>

        <p class="caption" data-i18n="napCaption">NAP based on SVS Prep Contribution...</p>
        <div class="actions">
          <a class="btn neon" href="https://discord.gg/mBVUKFVC7C" target="_blank" data-i18n="joinDiscord">ğŸ’¬ Join Discord</a>
          <a class="btn" href="https://docs.google.com/forms/d/e/1FAIpQLScjYq6pLm8E2L5OLPgkGcsxk7Bxj1WlR2aC24lfJs83KOkLQw/viewform?usp=header" target="_blank" data-i18n="registerSVS">ğŸ“‹ Daftar SVS</a>
        </div>
      </div>
      <div class="card fadeIn delay2" style="margin-top:12px;">
        <h2 data-i18n="shortInstructions">Short Instructions</h2>
        <ul style="padding-left:18px;color:var(--muted);margin:6px 0 0 0">
          <li>All times <strong>UTC</strong>.</li>
          <li>ğŸ“… <span data-i18n="serverAgeLabel">Server Age</span>: <span id="server-age" style="color:#ff4d4d; font-weight:bold;">...</span> <span data-i18n="daysLabel">days</span></li>
          <li>ğŸ» = Bear Trap (BT)</li>
          <li>ğŸ¤  = Crazy Joe (CJ)</li>
          <li>Use Discord for SVS coordination</li>
        </ul>
      </div>

      <div class="card fadeIn delay1">
        <h2 data-i18n="scheduleTitle">Schedule Event (UTC)</h2>
        
        <button class="accordion" data-target="kor-panel">
          <div class="left"><span class="alias kor">VLN</span><div class="alias kor" style="margin-left:6px"><span data-i18n="rolePrimary">â€” primary</span></div></div>
          <div class="chev">â–¸</div>
        </button>
        <div id="kor-panel" class="panel">
          <div class="event-row"><div class="event-name"><span data-i18n="evBearTrap">ğŸ» Bear Trap</span></div><div class="event-time">13:30 & 15:00</div></div>
          <div class="event-row"><div class="event-name"><span data-i18n="evFoundry">ğŸ­ Foundry</span></div><div class="event-time">12:00 & 14:00</div></div>
          <div class="event-row"><div class="event-name"><span data-i18n="evCanyon">ğŸï¸ Canyon</span></div><div class="event-time">12:00 & 14:00</div></div>
          <div class="event-row"><div class="event-name"><span data-i18n="evCrazyJoe">ğŸ¤  Crazy Joe</span></div><div class="event-time">12:30</div></div>
        </div>

        <button class="accordion" data-target="grd-panel">
          <div class="left"><span class="alias grd">GRD</span><div class="alias grd" style="margin-left:6px"><span data-i18n="roleSupport">â€” support</span></div></div>
          <div class="chev">â–¸</div>
        </button>
        <div id="grd-panel" class="panel">
          <div class="event-row"><div class="event-name"><span data-i18n="evBearTrap">ğŸ» Bear Trap</span></div><div class="event-time">14:00 & 16:00</div></div>
          <div class="event-row"><div class="event-name"><span data-i18n="evFoundry">ğŸ­ Foundry</span></div><div class="event-time">12:00 & 14:00</div></div>
          <div class="event-row"><div class="event-name"><span data-i18n="evCanyon">ğŸï¸ Canyon</span></div><div class="event-time">12:00 & 14:00</div></div>
          <div class="event-row"><div class="event-name"><span data-i18n="evCrazyJoe">ğŸ¤  Crazy Joe</span></div><div class="event-time">13:00 & 14:00</div></div>
        </div>

        <button class="accordion" data-target="bee-panel">
          <div class="left"><span class="alias bee">BEE</span><div class="alias bee" style="margin-left:6px"><span data-i18n="roleFrontline">â€” frontline</span></div></div>
          <div class="chev">â–¸</div>
        </button>
        <div id="bee-panel" class="panel">
          <div class="event-row"><div class="event-name"><span data-i18n="evBearTrap">ğŸ» Bear Trap</span></div><div class="event-time">17:00 & 19:00</div></div>
          <div class="event-row"><div class="event-name"><span data-i18n="evFoundry">ğŸ­ Foundry</span></div><div class="event-time">14:00 & 19:00</div></div>
          <div class="event-row"><div class="event-name"><span data-i18n="evCanyon">ğŸï¸ Canyon</span></div><div class="event-time">12:00 & 19:00</div></div>
          <div class="event-row"><div class="event-name"><span data-i18n="evCrazyJoe">ğŸ¤  Crazy Joe</span></div><div class="event-time">16:40 & 17:40</div></div>
        </div>

        <button class="accordion" data-target="tur-panel">
          <div class="left"><span class="alias tur">TUR</span><div class="alias tur" style="margin-left:6px"><span data-i18n="roleNight">â€” night ops</span></div></div>
          <div class="chev">â–¸</div>
        </button>
        <div id="tur-panel" class="panel">
          <div class="event-row"><div class="event-name"><span data-i18n="evBearTrap">ğŸ» Bear Trap</span></div><div class="event-time">13:30 & 19:00</div></div>
          <div class="event-row"><div class="event-name"><span data-i18n="evFoundry">ğŸ­ Foundry</span></div><div class="event-time">14:00 & 19:00</div></div>
          <div class="event-row"><div class="event-name"><span data-i18n="evCanyon">ğŸï¸ Canyon</span></div><div class="event-time">19:00 & 21:00</div></div>
          <div class="event-row"><div class="event-name"><span data-i18n="evCrazyJoe">ğŸ¤  Crazy Joe</span></div><div class="event-time">19:00</div></div>
        </div>
                <button class="accordion" data-target="wbe-panel">
          <div class="left">
            <span class="alias wbe">WBE</span>
            <div class="alias wbe" style="margin-left:6px"><span data-i18n="roleWbe">â€” tactical</span></div>
          </div>
          <div class="chev">â–¸</div>
        </button>
        <div id="wbe-panel" class="panel">
          <div class="event-row">
            <div class="event-name"><span data-i18n="evBearTrap">ğŸ» Bear Trap</span></div>
            <div class="event-time">19:00 & 21:00</div>
          </div>
          <div class="event-row">
            <div class="event-name"><span data-i18n="evFoundry">ğŸ­ Foundry</span></div>
            <div class="event-time">14:00 & 19:00</div>
          </div>
          <div class="event-row">
            <div class="event-name"><span data-i18n="evCanyon">ğŸï¸ Canyon</span></div>
            <div class="event-time">14:00 & 19:00</div>
          </div>
          <div class="event-row">
            <div class="event-name"><span data-i18n="evCrazyJoe">ğŸ¤  Crazy Joe</span></div>
            <div class="event-time">20:00</div>
          </div>
        </div>

        <button class="accordion" data-target="hel-panel">
          <div class="left">
            <span class="alias hel">HEL</span>
            <div class="alias hel" style="margin-left:6px"><span data-i18n="roleHel">â€” academy</span></div>
          </div>
          <div class="chev">â–¸</div>
        </button>
        <div id="hel-panel" class="panel">
          <div class="event-row">
            <div class="event-name"><span data-i18n="evBearTrap">ğŸ» Bear Trap</span></div>
            <div class="event-time">19:00 & 21:00</div>
          </div>
          <div class="event-row">
            <div class="event-name"><span data-i18n="evFoundry">ğŸ­ Foundry</span></div>
            <div class="event-time">14:00 & 19:00</div>
          </div>
          <div class="event-row">
            <div class="event-name"><span data-i18n="evCanyon">ğŸï¸ Canyon</span></div>
            <div class="event-time">14:00 & 19:00</div>
          </div>
          <div class="event-row">
            <div class="event-name"><span data-i18n="evCrazyJoe">ğŸ¤  Crazy Joe</span></div>
            <div class="event-time">20:00</div>
          </div>
        </div>
        <p class="caption" data-i18n-html="accordionHint">Click on the alliance name...</p>
      </div>

      <div class="card fadeIn delay4" style="margin-top:12px;">
        <h2 style="color:#fff; margin-bottom:8px;" data-i18n="calcTitle">ğŸ§® Points Calculator SVS</h2>
        <p style="color:var(--muted); font-size:13px; margin-top:0; margin-bottom:12px;" data-i18n="calcDesc">If you want to calculate...</p>
        <a class="btn neon" href="https://wostools.net/svs-calculator" target="_blank" data-i18n="calcBtn">ğŸ–±ï¸Visit Calculator SVS</a>
      </div>

      <div class="card fadeIn delay3" style="margin-top:12px;">
          <h2 style="color:var(--neon);">ğŸ¤ Peta Wilayah</h2>
          <p style="font-size: 0.85em; color:var(--muted); margin-bottom:15px;">
              Otomatis: <span style="color:#00ff88">[GRD]</span> / <span style="color:#58a6ff">[VLN]</span> / <span style="color:#ff5c5c">[TUR]</span> / <span style="color:#fff24f">[BEE]</span> / <span style="color:#FF9F43">[WBE]</span> / <span style="color:#D6A2E8">[HEL]</span>
          </p>
          
          <h3 style="font-size:14px; border-left: 3px solid var(--accent); padding-left: 10px; margin-bottom: 10px; margin-top:0;">ğŸ° Strongholds</h3>
          <div id="stronghold-list" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px;"></div>

          <h3 style="font-size:14px; border-left: 3px solid #ff4d4d; padding-left: 10px; margin-bottom: 10px; margin-top:20px;">ğŸ›¡ï¸ Fortresses</h3>
          <div id="fortress-list" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;"></div>
      </div>
  <footer style="margin-top:16px;text-align:center;color:var(--muted);font-size:13px">Â© 2025 STATE 1931 â€¢ By Mr.jhon</footer>
</div>

<script>
    // DATA PEMILIK WILAYAH (Edit di sini setiap minggu)
    const strongholds = ["[GRD]", "[VLN]", "[VLN]", "[BEE]"];
    const fortresses = [
        "[VLN]", "[GRD]", "[GRD]", 
        "[VLN]", "[BEE]", "[BEE]", 
        "[TUR]", "[WBE]", "[IDN]", 
        "[TOP]", "[TOP]", "[HEL]"
    ];
    // FUNGSI RENDER PETA (Logika Pintar)
    function renderMap(list, containerId, prefix) {
        const container = document.getElementById(containerId);
        if(!container) return;
        container.innerHTML = "";
        
        list.forEach((tag, index) => {
            let cssClass = "ally"; // Default Netral
            let textTag = tag.toUpperCase(); 

            // DETEKSI WARNA OTOMATIS
            if (textTag.includes("GRD")) { cssClass = "grd"; }
            else if (textTag.includes("VLN")) { cssClass = "vln"; }
            else if (textTag.includes("BEE")) { cssClass = "bee"; }
            else if (textTag.includes("TUR")) { cssClass = "tur"; }
            else if (textTag.includes("WBE")) { cssClass = "wbe"; }
            else if (textTag.includes("HEL")) { cssClass = "hel"; }
            else if (textTag === "TUR" || textTag === "") { cssClass = ""; }

            container.innerHTML += `
                <div class="fort ${cssClass}">
                    <span class="f-name">${prefix}-${index + 1}</span>
                    <span class="f-owner">${tag}</span>
                </div>
            `;
        });
    }

    // JALANKAN SAAT WEBSITE DIBUKA
    window.addEventListener("load", function() {
        renderMap(strongholds, "stronghold-list", "S");
        renderMap(fortresses, "fortress-list", "F");
    });
</script>
<script>
  /* 1. I18N SYSTEM - UPDATE WBE & HEL */
window.currentLang = 'en';
const i18n = {
  en: { 
    subtitle: "Whiteout Survival â€” info & schedule (UTC)", 
    nextLabel: "Next event", 
    majorAlliance: "Major Alliance", 
    napCaption: "NAP based on SVS Prep Contribution. Shared castle/forts + 20% fortress buff rewards.", 
    joinDiscord: "ğŸ’¬ Join Discord", 
    registerSVS: "ğŸ“‹ Register SVS", 
    shortInstructions: "Short Instructions", 
    instUtc: "All times <strong>UTC</strong>.", 
    instBT: "ğŸ» = Bear Trap (BT)", 
    instCJ: "ğŸ¤  = Crazy Joe (CJ)", 
    instDiscord: "Use Discord for SVS coordination", 
    scheduleTitle: "Schedule Event (UTC)", 
    rolePrimary: "â€” primary", 
    roleSupport: "â€” support", 
    roleFrontline: "â€” frontline", 
    roleNight: "â€” night ops",
    /* --- TAMBAHAN BARU --- */
    roleWbe: "â€” tactical",
    roleHel: "â€” academy",
    /* --------------------- */
    evBearTrap: "ğŸ» Bear Trap", 
    evFoundry: "ğŸ­ Foundry", 
    evCanyon: "ğŸï¸ Canyon", 
    evCrazyJoe: "ğŸ¤  Crazy Joe", 
    accordionHint: "Click on the alliance name to expand/collapse details. All times are <strong>UTC</strong>.", 
    calcTitle: "ğŸ§® Points Calculator SVS", 
    calcDesc: "If you want to calculate how many points you can collect from the materials you have saved, please visit this website:", 
    calcBtn: "ğŸ–±ï¸Visit Calculator SVS",
    serverAgeLabel: "Server Age",
    daysLabel: "days"
  },
  id: { 
    subtitle: "Whiteout Survival â€” info & jadwal (UTC)", 
    nextLabel: "Event berikutnya", 
    majorAlliance: "Aliansi Utama", 
    napCaption: "NAP berdasarkan kontribusi persiapan SVS. Kastil/fort berbagi + hadiah buff benteng 20%.", 
    joinDiscord: "ğŸ’¬ Gabung Discord", 
    registerSVS: "ğŸ“‹ Daftar SVS", 
    shortInstructions: "Instruksi Singkat", 
    instUtc: "Semua waktu <strong>UTC</strong>.", 
    instBT: "ğŸ» = Bear Trap (BT)", 
    instCJ: "ğŸ¤  = Crazy Joe (CJ)", 
    instDiscord: "Gunakan Discord untuk koordinasi SVS", 
    scheduleTitle: "Jadwal Event (UTC)", 
    rolePrimary: "â€” utama", 
    roleSupport: "â€” dukungan", 
    roleFrontline: "â€” garis depan", 
    roleNight: "â€” operasi malam", 
    /* --- TAMBAHAN BARU --- */
    roleWbe: "â€” taktis",
    roleHel: "â€” akademi",
    /* --------------------- */
    evBearTrap: "ğŸ» Bear Trap", 
    evFoundry: "ğŸ­ Foundry", 
    evCanyon: "ğŸï¸ Canyon", 
    evCrazyJoe: "ğŸ¤  Crazy Joe", 
    accordionHint: "Klik nama aliansi untuk expand/collapse detail. Semua waktu dalam <strong>UTC</strong>.", 
    calcTitle: "ğŸ§® Kalkulator Poin SVS", 
    calcDesc: "Kalau mau hitung poin dari material yang sudah disimpan, kunjungi situs ini:", 
    calcBtn: "ğŸ–±ï¸Kunjungi Kalkulator SVS",
    serverAgeLabel: "Umur Server",
    daysLabel: "hari"
  },
  ko: { 
    subtitle: "í™”ì´íŠ¸ì•„ì›ƒ ì„œë°”ì´ë²Œ â€” ì •ë³´ & ì¼ì • (UTC)", 
    nextLabel: "ë‹¤ìŒ ì´ë²¤íŠ¸", 
    majorAlliance: "ì£¼ìš” ë™ë§¹", 
    napCaption: "SVS ì¤€ë¹„ ê¸°ì—¬ë„ ê¸°ì¤€ NAP. ì„±/ìš”ìƒˆ ê³µìœ  + ìš”ìƒˆ ë²„í”„ ë³´ìƒ 20%.", 
    joinDiscord: "ğŸ’¬ ë””ìŠ¤ì½”ë“œ ì°¸ì—¬", 
    registerSVS: "ğŸ“‹ SVS ë“±ë¡", 
    shortInstructions: "ê°„ë‹¨í•œ ì§€ì¹¨", 
    instUtc: "ëª¨ë“  ì‹œê°„ì€ <strong>UTC</strong> ê¸°ì¤€ì…ë‹ˆë‹¤.", 
    instBT: "ğŸ» = ë² ì–´ íŠ¸ë© (BT)", 
    instCJ: "ğŸ¤  = í¬ë ˆì´ì§€ ì¡° (CJ)", 
    instDiscord: "SVS ì¡°ìœ¨ì€ ë””ìŠ¤ì½”ë“œë¥¼ ì‚¬ìš©í•˜ì„¸ìš”", 
    scheduleTitle: "ì´ë²¤íŠ¸ ì¼ì • (UTC)", 
    rolePrimary: "â€” ì£¼ë ¥", 
    roleSupport: "â€” ì§€ì›", 
    roleFrontline: "â€” ì „ì„ ", 
    roleNight: "â€” ì•¼ê°„ ì‘ì „", 
    /* --- TAMBAHAN BARU --- */
    roleWbe: "â€” ì „ìˆ ",
    roleHel: "â€” ì•„ì¹´ë°ë¯¸",
    /* --------------------- */
    evBearTrap: "ğŸ» ë² ì–´ íŠ¸ë©", 
    evFoundry: "ğŸ­ ì£¼ì¡°ì†Œ", 
    evCanyon: "ğŸï¸ í˜‘ê³¡", 
    evCrazyJoe: "ğŸ¤  í¬ë ˆì´ì§€ ì¡°", 
    accordionHint: "ë™ë§¹ ì´ë¦„ì„ í´ë¦­í•˜ì—¬ ìì„¸íˆ ë³´ê¸°/ì ‘ê¸°. ëª¨ë“  ì‹œê°„ì€ <strong>UTC</strong>ì…ë‹ˆë‹¤.", 
    calcTitle: "ğŸ§® SVS í¬ì¸íŠ¸ ê³„ì‚°ê¸°", 
    calcDesc: "ì €ì¥í•´ë‘” ì¬ë£Œë¡œ ì–»ì„ í¬ì¸íŠ¸ë¥¼ ê³„ì‚°í•˜ë ¤ë©´ ì•„ë˜ ì›¹ì‚¬ì´íŠ¸ë¥¼ ë°©ë¬¸í•˜ì„¸ìš”:", 
    calcBtn: "ğŸ–±ï¸ SVS ê³„ì‚°ê¸° ë°©ë¬¸",
    serverAgeLabel: "ì„œë²„ ì˜¤í”ˆ",
    daysLabel: "ì¼ì§¸"
  }
};
function applyTranslations(lang){
  const dict = i18n[lang] || i18n.en;
  document.querySelectorAll('[data-i18n]').forEach(el=>{ const key=el.getAttribute('data-i18n'); if(dict[key]) el.innerText=dict[key]; });
  document.querySelectorAll('[data-i18n-html]').forEach(el=>{ const key=el.getAttribute('data-i18n-html'); if(dict[key]) el.innerHTML=dict[key]; });
  document.documentElement.setAttribute('lang', lang);
}
window.addEventListener('DOMContentLoaded', ()=>{
  document.querySelectorAll('[data-lang]').forEach(btn=>{ btn.addEventListener('click', ()=>{ currentLang=btn.getAttribute('data-lang'); applyTranslations(currentLang); updateCountdown(); }); });
  applyTranslations(currentLang);
});
function tEventName(enName){ const keyMap={"Bear Trap":"evBearTrap","Foundry":"evFoundry","Canyon":"evCanyon","Crazy Joe":"evCrazyJoe"}; const key=keyMap[enName]; if(!key)return enName; const dict=i18n[currentLang]||i18n.en; return (dict[key]||enName).replace(/^([\u2600-\u27BF]|\p{Emoji_Presentation}|\p{Emoji}\uFE0F)\s*/u,'').trim()||enName; }

/* 2. SNOW EFFECT */
(() => { const canvas=document.getElementById('snow-canvas'); const ctx=canvas.getContext('2d'); let w=canvas.width=innerWidth,h=canvas.height=innerHeight; const flakes=[]; const num=Math.floor((w*h)/50000); for(let i=0;i<num;i++){ flakes.push({x:Math.random()*w, y:Math.random()*h, r:(Math.random()*2.5)+0.8, d:Math.random()*1.5, s:(Math.random()*0.6)+0.2}); } addEventListener('resize',()=>{w=canvas.width=innerWidth;h=canvas.height=innerHeight;}); function draw(){ ctx.clearRect(0,0,w,h); ctx.fillStyle='rgba(255,255,255,0.85)'; flakes.forEach((f,i)=>{ ctx.beginPath(); ctx.arc(f.x,f.y,f.r,0,Math.PI*2); ctx.fill(); f.y+=f.s+Math.sin(f.d+i)*0.3; f.x+=Math.cos(f.d+i)*0.2; if(f.y>h+10) f.y=-5,f.x=Math.random()*w; if(f.x>w+10) f.x=-5; if(f.x<-10) f.x=w+5; }); requestAnimationFrame(draw); } draw(); })();

/* 3. ACCORDION */
document.querySelectorAll('.accordion').forEach(btn=>{ btn.addEventListener('click',()=>{ const target=document.getElementById(btn.dataset.target); const chev=btn.querySelector('.chev'); if(!target)return; const opened=target.style.display==='block'; document.querySelectorAll('.panel').forEach(p=>{ p.style.display='none'; p.previousElementSibling.querySelector('.chev').style.transform='rotate(0deg)'; }); if(!opened){ target.style.display='block'; chev.style.transform='rotate(90deg)'; } }); });

/* 4. NEW COUNTDOWN LOGIC (ANCHOR BASED) */
const anchorBear = "2026-01-28"; 
const anchorFoundry = "2026-01-25"; 
const anchorCanyon = "2026-01-25"; 
const anchorCJ_Tue = "2026-01-27"; 
const anchorCJ_Thu = "2026-01-29"; 

const schedules = [
  {alli:"VLN", name:"Bear Trap", cycle:48, anchors:[`${anchorBear}T13:30:00Z`,`${anchorBear}T15:00:00Z`]},
  {alli:"VLN", name:"Foundry", cycle:336, anchors:[`${anchorFoundry}T12:00:00Z`,`${anchorFoundry}T14:00:00Z`]},
  {alli:"VLN", name:"Canyon", cycle:672, anchors:[`${anchorCanyon}T12:00:00Z`,`${anchorCanyon}T14:00:00Z`]},
  {alli:"VLN", name:"Crazy Joe", cycle:336, anchors:[`${anchorCJ_Tue}T12:00:00Z`,`${anchorCJ_Thu}T12:30:00Z`]},
  
  {alli:"GRD", name:"Bear Trap", cycle:48, anchors:[`${anchorBear}T14:00:00Z`,`${anchorBear}T16:00:00Z`]},
  {alli:"GRD", name:"Foundry", cycle:336, anchors:[`${anchorFoundry}T12:00:00Z`,`${anchorFoundry}T14:00:00Z`]},
  {alli:"GRD", name:"Canyon", cycle:672, anchors:[`${anchorCanyon}T12:00:00Z`,`${anchorCanyon}T14:00:00Z`]},
  {alli:"GRD", name:"Crazy Joe", cycle:336, anchors:[`${anchorCJ_Tue}T13:00:00Z`,`${anchorCJ_Thu}T13:00:00Z`,`${anchorCJ_Tue}T14:00:00Z`,`${anchorCJ_Thu}T14:00:00Z`]},
  
  {alli:"BEE", name:"Bear Trap", cycle:48, anchors:[`${anchorBear}T17:00:00Z`,`${anchorBear}T19:00:00Z`]},
  {alli:"BEE", name:"Foundry", cycle:336, anchors:[`${anchorFoundry}T14:00:00Z`,`${anchorFoundry}T19:00:00Z`]},
  {alli:"BEE", name:"Canyon", cycle:672, anchors:[`${anchorCanyon}T12:00:00Z`,`${anchorCanyon}T19:00:00Z`]},
  {alli:"BEE", name:"Crazy Joe", cycle:336, anchors:[`${anchorCJ_Tue}T16:40:00Z`,`${anchorCJ_Thu}T16:40:00Z`,`${anchorCJ_Tue}T17:40:00Z`,`${anchorCJ_Thu}T17:40:00Z`]},
  
  {alli:"TUR", name:"Bear Trap", cycle:48, anchors:[`${anchorBear}T13:30:00Z`,`${anchorBear}T19:00:00Z`]},
  {alli:"TUR", name:"Foundry", cycle:336, anchors:[`${anchorFoundry}T14:00:00Z`,`${anchorFoundry}T19:00:00Z`]},
  {alli:"TUR", name:"Canyon", cycle:672, anchors:[`${anchorCanyon}T19:00:00Z`,`${anchorCanyon}T21:00:00Z`]},
  {alli:"TUR", name:"Crazy Joe", cycle:336, anchors:[`${anchorCJ_Tue}T19:00:00Z`,`${anchorCJ_Thu}T19:00:00Z`]},

  /* --- JADWAL BARU WBE & HEL (Hitung Mundur) --- */
  {alli:"WBE", name:"Bear Trap", cycle:48, anchors:[`${anchorBear}T19:00:00Z`,`${anchorBear}T21:00:00Z`]},
  {alli:"WBE", name:"Foundry", cycle:336, anchors:[`${anchorFoundry}T14:00:00Z`,`${anchorFoundry}T19:00:00Z`]},
  {alli:"WBE", name:"Canyon", cycle:672, anchors:[`${anchorCanyon}T14:00:00Z`,`${anchorCanyon}T19:00:00Z`]},
  {alli:"WBE", name:"Crazy Joe", cycle:336, anchors:[`${anchorCJ_Tue}T20:00:00Z`,`${anchorCJ_Thu}T20:00:00Z`]},

  {alli:"HEL", name:"Bear Trap", cycle:48, anchors:[`${anchorBear}T19:00:00Z`,`${anchorBear}T21:00:00Z`]},
  {alli:"HEL", name:"Foundry", cycle:336, anchors:[`${anchorFoundry}T14:00:00Z`,`${anchorFoundry}T19:00:00Z`]},
  {alli:"HEL", name:"Canyon", cycle:672, anchors:[`${anchorCanyon}T14:00:00Z`,`${anchorCanyon}T19:00:00Z`]},
  {alli:"HEL", name:"Crazy Joe", cycle:336, anchors:[`${anchorCJ_Tue}T20:00:00Z`,`${anchorCJ_Thu}T20:00:00Z`]}
];

function getNextEvent(){
  const now = new Date();
  let upcoming = [];
  schedules.forEach(item => {
    item.anchors.forEach(anchorStr => {
      let nextDate = new Date(anchorStr);
      const intervalMs = item.cycle * 3600 * 1000;
      while (nextDate <= now) { nextDate = new Date(nextDate.getTime() + intervalMs); }
      upcoming.push({ alli: item.alli, name: item.name, time: nextDate });
    });
  });
  upcoming.sort((a, b) => a.time - b.time);
  return upcoming[0];
}

function updateCountdown(){
  const next = getNextEvent();
  const elName = document.getElementById('nextEventName');
  const elDate = document.getElementById('nextEventDate');
  const elD = document.getElementById('cdDays');
  const elH = document.getElementById('cdHours');
  const elM = document.getElementById('cdMinutes');
  const elS = document.getElementById('cdSeconds');

  if (!next) { elName.innerText = "No Event"; return; }

  let translatedName = typeof tEventName === 'function' ? tEventName(next.name) : next.name;
  elName.innerHTML = `<span class="${next.alli.toLowerCase()}">${next.alli}</span> â€¢ ${translatedName}`;
  
  const utcH = String(next.time.getUTCHours()).padStart(2,'0');
  const utcM = String(next.time.getUTCMinutes()).padStart(2,'0');
  elDate.innerText = `At ${utcH}:${utcM} UTC`;

  function tick() {
    const now = new Date();
    const diff = Math.floor((next.time - now) / 1000);
    if (diff <= 0) { setTimeout(updateCountdown, 1000); return; }
    
    const d = Math.floor(diff / 86400);
    const h = Math.floor((diff % 86400) / 3600);
    const m = Math.floor((diff % 3600) / 60);
    const s = diff % 60;

    if (d > 0) { elD.style.display = 'inline-block'; elD.innerText = d + 'd'; } else { elD.style.display = 'none'; }
    elH.innerText = String(h).padStart(2, '0');
    elM.innerText = String(m).padStart(2, '0');
    elS.innerText = String(s).padStart(2, '0');
  }
  tick();
  if (window._cdInterval) clearInterval(window._cdInterval);
  window._cdInterval = setInterval(tick, 1000);
}

// Start
updateCountdown();
document.getElementById('kor-panel').style.display='block';
document.querySelectorAll('.accordion')[0].querySelector('.chev').style.transform='rotate(90deg)';
</script>

<script>
  document.addEventListener("DOMContentLoaded", function() {
      const serverStartDate = new Date(2024, 9, 19); 
      const today = new Date();
      const diffTime = Math.abs(today - serverStartDate);
      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); 
      const ageElement = document.getElementById("server-age");
      
      if (ageElement) {
          ageElement.innerText = diffDays;
          ageElement.style.color = "#ff4d4d";
          ageElement.style.fontWeight = "bold"; 
      }
  });
</script>


</body>
</html>
